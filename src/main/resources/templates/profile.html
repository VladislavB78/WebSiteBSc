<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Профиль</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>
<body class="text-center">

<header th:insert="blocks/header :: header-other"></header>

<main class="container">

    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <h1 class="fw-light">Профиль</h1>
                <div>
<!--                    <h3 th:inline="text">Приветсвую, [[${#httpServletRequest.remoteUser}]]!</h3>-->
                    <form th:action="@{/logout}" method="post">
                        <input class="btn btn-sm btn-danger fs-5" type="submit" value="Выход"/>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <hr class="my-5">
    <div>
        <h4 class="mb-3">Адрес доставки</h4>
        <form class="needs-validation" method="post" novalidate th:object="${customer}">
            <div class="row g-3">
                <div class="col-sm-6">
                    <label for="firstName" class="form-label">Имя</label>
                    <input th:value="${customer.first_name}" type="text" class="form-control" id="firstName" th:name="first_name" required>
                    <div class="invalid-feedback">
                        Пожалуйста, введите Ваше имя
                    </div>
                </div>

                <div class="col-sm-6">
                    <label for="lastName" class="form-label">Фамилия</label>
                    <input th:value="${customer.last_name}" type="text" class="form-control" id="lastName" th:name="last_name" required>
                    <div class="invalid-feedback">
                        Пожалуйста, введите Вашу фамилию
                    </div>
                </div>

                <div class="col-12">
                    <label for="email" class="form-label">Email</label>
                    <input th:value="${customer.email}" type="email" class="form-control" id="email" th:name="email" placeholder="you@example.com" required>
                    <div class="invalid-feedback">
                        Пожалуйста, введите Ваш email корректно
                    </div>
                </div>

                <div class="col-12">
                    <label for="address" class="form-label">Адрес</label>
                    <input th:value="${customer.postal_address}" type="text" class="form-control" id="address" th:name="postal_address" placeholder="123456 Город Улица" required>
                    <div class="invalid-feedback">
                        Пожалуйста, введите Ваш адрес
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <button class="w-100 btn btn-primary btn-lg" type="submit">Внести изменения</button>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        </form>
    </div>

</main>

<footer th:insert="blocks/footer :: footer"></footer>

<script>
(function () {

  var forms = document.querySelectorAll('.needs-validation')

  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()
</script>
</body>
</html>